<#import "layout.html" as layout> <@layout.html>
<div class="container">
	<h1>Sisesta infosüsteemi andmed</h1>
	<form name="infosystem-form" id="infosystem-form" method="post"
		action="/save/">
		<input type="hidden" name="id" value="${(infosystem.shortname)!}">
		<div class="form-group">
			<label for="name">Nimi</label> <input type="text"
				class="form-control" id="name" name="name" placeholder="Nimi"
				required value="${(infosystem.name)!}">
		</div>
		<div class="form-group">
			<label for="short-name">Lühinimi</label> <input type="text"
				class="form-control" id="short-name" name="shortName"
				placeholder="Lühinimi" required value="${(infosystem.shortname)!}">
		</div>
		<div class="form-group">
			<label for="documentation">Dokumentatsiooni URL</label> <input
				type="text" class="form-control" id="documentation"
				name="documentation" placeholder="Dokumentatsiooni URL" required
				value="${(infosystem.documentation)!}">
		</div>
		<div class="form-group">
			<label for="objective">Eesmärk</label> <input type="text"
				class="form-control" id="objective" name="objective"
				placeholder="Eesmärk" required value="${(infosystem.objective)!}">
		</div>

		<button type="submit" class="btn btn-default">Salvesta</button>
		<button type="button" onclick="cancel()" class="btn btn-danger cancel">Katkesta</button>
	</form>
</div>
<script>
	var nameOnLoad = getInputValue("infosystem-form", "name");
	var shortNameOnLoad = getInputValue("infosystem-form", "shortName");
	var documentationOnLoad = getInputValue("infosystem-form", "documentation");
	var objectiveOnLoad = getInputValue("infosystem-form", "objective");

	function cancel() {
		var name = getInputValue("infosystem-form", "name");
		var shortName = getInputValue("infosystem-form", "shortName");
		var documentation = getInputValue("infosystem-form", "documentation");
		var objective = getInputValue("infosystem-form", "objective");

		if ((name == "" || name == nameOnLoad)
				&& (shortName == "" || shortName == shortNameOnLoad)
				&& (documentation == "" || documentation == documentationOnLoad)
				&& (objective == "" || objective == objectiveOnLoad)) {
			window.location = "/";
		} else {
			if (confirm("Kas kindlasti soovid katkestada?")) {
				window.location = "/";
			}
		}
	}

	function getInputValue(formName, inputName) {
		return document.forms[formName][inputName].value;
	}

	$(function() {
		$('#infosystem-form').validator();
	})
</script> </@layout.html> 